{"version":3,"file":"blocks.js","mappings":"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","sources":["webpack://wp-chat-gpt-plugin/external window [\"wp\",\"apiFetch\"]","webpack://wp-chat-gpt-plugin/external window [\"wp\",\"components\"]","webpack://wp-chat-gpt-plugin/external window [\"wp\",\"data\"]","webpack://wp-chat-gpt-plugin/external window [\"wp\",\"editPost\"]","webpack://wp-chat-gpt-plugin/external window [\"wp\",\"element\"]","webpack://wp-chat-gpt-plugin/external window [\"wp\",\"url\"]","webpack://wp-chat-gpt-plugin/webpack/bootstrap","webpack://wp-chat-gpt-plugin/webpack/runtime/compat get default export","webpack://wp-chat-gpt-plugin/webpack/runtime/define property getters","webpack://wp-chat-gpt-plugin/webpack/runtime/hasOwnProperty shorthand","webpack://wp-chat-gpt-plugin/webpack/runtime/make namespace object","webpack://wp-chat-gpt-plugin/./blocks/mopen-ai-sidebar/index.js"],"sourcesContent":["module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"editPost\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { useState, useEffect } from '@wordpress/element'\nimport {Notice, Button, Modal, Spinner} from '@wordpress/components';\nimport { useSelect, select, dispatch} from '@wordpress/data';\nimport { addQueryArgs } from '@wordpress/url';\nimport apiFetch from '@wordpress/api-fetch';\nimport { PluginSidebar, PluginSidebarMoreMenuItem } from '@wordpress/edit-post';\n\nconst MOpenAISidebar = () => {\n    const [ isOpen, setOpen ] = useState( false );\n    const [ isNotice, setNotice ] = useState( false );\n    const [ restNotice, setRestNotice ] = useState( '' );\n    const [ posts, setPosts ] = useState( [] );\n    const [ excerpts, setExcerpts ] = useState( [] );\n    const [ isLoader, setLoader ] = useState( false );\n    const [ modalHeader, setModalHeader ] = useState( '' );\n    const [ errors, setErrors ] = useState( '' );\n\n    const closeModal = () => {\n        setPosts([]);\n        setExcerpts([]);\n        setErrors('');\n        setNotice('');\n        setOpen( false );\n    };\n    let fetchRequest  = (param, queryParams ) => {\n        return apiFetch( { path: addQueryArgs(`/mopen_ai/v1/${param}`, queryParams )} );\n    };\n\n    let content = useSelect( 'core/editor' ).getBlocks().filter( (i) => i.name === 'core/paragraph' || i.name === 'core/heading' );\n    let temp = '';\n    content.map((item) => {\n        temp += item.attributes.content\n    });\n    const dispatchTitle = (title) => {\n        if (title) {\n            const postId = select('core/editor').getCurrentPostId();\n            dispatch('core/editor').editPost({title: title, id: postId})\n            const titleBlock = select('core/editor').getBlocks().find(block => block.name === 'core/post-title');\n            if (titleBlock) {\n                    // Update the title attribute\n                    dispatch('core/block-editor').updateBlockAttributes(titleBlock.clientId, {title: title});\n                    dispatch('core/editor').editPost({title: title});\n                    console.log('Title updated:', title);\n                } else {\n                    console.log('No title block found.');\n                }\n        } else {\n            console.log('Title is empty or null.');\n        }\n        setOpen( false );\n    };\n    const dispatchExcerpts = (excerpt) => {\n        if (excerpt) {\n            const postId = select('core/editor').getCurrentPostId();\n            dispatch('core/editor').editPost({excerpt: excerpt, id: postId})\n        }\n        setOpen( false );\n    };\n\n    const getResponse = (param) => {\n        setPosts([]);\n        setErrors('');\n        setRestNotice('');\n        setExcerpts([]);\n        const queryParams = { content: temp };\n\n        if (param === 'get-excerpts') {\n            setModalHeader('Most Relevant Excerpts')\n        }\n        if (param === 'get-titles') {\n            setModalHeader('Most Relevant Headings')\n        }\n        setOpen( true );\n        setLoader( true );\n        fetchRequest(param, queryParams).then( ( response ) => {\n            let json_response = JSON.parse(response);\n            if (json_response['error'] && json_response['error']['message']) {\n                setErrors(json_response['error']['message']);\n            } else {\n                param === \"get-titles\" ? setPosts(json_response) : setExcerpts(json_response);\n            }\n            setLoader(false)\n        } )\n            .catch(error => {\n                    setRestNotice(error.message);\n                    setOpen( false );\n                    setLoader( false );\n                    setNotice( true );\n            });\n\n    };\n    return (\n        <>\n            <PluginSidebarMoreMenuItem target=\"mopenai-settings-sidebar\">\n                Open AI\n            </PluginSidebarMoreMenuItem>\n            <PluginSidebar\n                name=\"mopenai-settings-sidebar\"\n                title=\"Open Ai\"\n                icon=\"admin-settings\">\n                <div class=\"mopen-ai__body\">\n                    <div class=\"mopen-ai__buton-group\">\n                        <Button isSecondary onClick={() => getResponse('get-titles')}>Create titles</Button>\n                        <Button isPrimary onClick={() => getResponse('get-excerpts')}>Create excerpt</Button>\n                    </div>\n                </div>\n                { isNotice && (\n                    <Notice\n                    status=\"error\"\n                    isDismissible={true}\n                    onRemove={() => setNotice(false)}>\n                        <p>{restNotice}</p>\n                    </Notice>\n                )}\n                { isOpen && (\n                    <Modal title={modalHeader} onRequestClose={ closeModal }>\n                        <div class=\"components-modal__body\">\n                            { isLoader && (\n                                <div class=\"components-modal__loader\">\n                                   <Spinner />\n                                </div>\n                            )}\n                            { errors && (\n                                <div class='components-modal__item'>{errors}</div>\n                            )}\n                            { posts && (\n                                posts.map((item, i) => {\n                                    return (\n                                        <div class='components-modal__item' onClick={() => dispatchTitle(item) }>{`${i+1}) ${item}`}</div>\n                                )})\n                            )}\n                            { excerpts && (\n                                excerpts.map((item, i) => {\n                                    return (\n                                        <div class='components-modal__item' onClick={() => dispatchExcerpts(item) }>{`${i+1}) ${item}`}</div>\n                                )})\n                            )}\n                        </div>\n                    </Modal>\n                )}\n            </PluginSidebar>\n         </>\n    );\n};\n\nconst MopenAIRegisterPlugin = () => {\n    const { registerPlugin } = wp.plugins;\n    const { getEditedPostAttribute } = select('core/editor');\n\n    useEffect(() => {\n        if (getEditedPostAttribute('type') === 'post') {\n            registerPlugin('mopen-plugin-sidebar', {\n                render: MOpenAISidebar,\n            });\n        }\n    }, [getEditedPostAttribute('type')]);\n\n    return null;\n};\n\nwp.domReady(() => {\n    wp.plugins.registerPlugin('mopen-plugin', { render: MopenAIRegisterPlugin });\n});"],"names":["useState","useEffect","Notice","Button","Modal","Spinner","useSelect","select","dispatch","addQueryArgs","apiFetch","PluginSidebar","PluginSidebarMoreMenuItem","MOpenAISidebar","isOpen","setOpen","isNotice","setNotice","restNotice","setRestNotice","posts","setPosts","excerpts","setExcerpts","isLoader","setLoader","modalHeader","setModalHeader","errors","setErrors","closeModal","fetchRequest","param","queryParams","path","content","getBlocks","filter","i","name","temp","map","item","attributes","dispatchTitle","title","postId","getCurrentPostId","editPost","id","titleBlock","find","block","updateBlockAttributes","clientId","console","log","dispatchExcerpts","excerpt","getResponse","then","response","json_response","JSON","parse","catch","error","message","createElement","Fragment","target","icon","class","isSecondary","onClick","isPrimary","status","isDismissible","onRemove","onRequestClose","MopenAIRegisterPlugin","registerPlugin","wp","plugins","getEditedPostAttribute","render","domReady"],"sourceRoot":""}